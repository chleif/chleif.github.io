<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style/reset.css">
    <link rel="stylesheet" href="../style/grid.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
        integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    <style>
        div .select {
            border: 5px solid blue;
        }
    </style>
</head>

<body>
    <header>
        <div class="index">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <a href="#">
                            <i class="fab fa-apple"></i>
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            Mac
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            iPad
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            Watch
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            TV
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            Music
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            支援服務
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            <i class="fas fa-search"></i>
                        </a>
                    </div>
                    <div class="col">
                        <a href="#">
                            <i class="fas fa-shopping-bag"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="headerPrice">
            <span>
                <a href="#">
                    <h1>iPhone Air</h1>
                </a>
            </span>
            <span class="price">NT$33,900 起</span>
        </div>
        <div class="loan">
            <div class="container">
                <p>以教育優惠為大專生活買 iPad 優惠組合，內含 AirPods***。
                    <span><a href="#">立即選購 <i class="fas fa-chevron-right"></i></a></span>
                </p>
                <p>
                    可申請最長達 12 個月的零利率分期付款。
                    <span><a href="#">進一步了解 <i class="fas fa-chevron-right"></i></a></span>
                </p>
            </div>
        </div>
    </header>
    <article>
        <div class="wrap">
            <div class="container">
                <div class="row .row-cols-2">
                    <div class="col">
                        <img id="mainimg" src="ipad-air-select-202009.jpg" alt="">
                    </div>
                    <div class="col">
                        <div class="intro">
                            <h1>購買 iPad Air</h1>
                        </div>
                        <div class="exterior">
                            <h4>外觀</h4>
                            <div class="container">
                                <button type="button" id="gray">
                                    <p>
                                        <i class="fas fa-circle"></i>
                                        <span>太空灰色</span>
                                    </p>
                                </button>
                                <button type="button" id="silver">
                                    <p>
                                        <i class="fas fa-circle"></i>
                                        <span>銀色</span>
                                    </p>
                                </button>
                                <button type="button" id="pink">
                                    <p>
                                        <i class="fas fa-circle"></i>
                                        <span>玫瑰金色</span>
                                    </p>
                                </button>
                                <button type="button" id="green">
                                    <p>
                                        <i class="fas fa-circle"></i>
                                        <span>綠色</span>
                                    </p>
                                </button>
                                <button type="button" id="blue">
                                    <p>
                                        <i class="fas fa-circle"></i>
                                        <span>天藍色</span>
                                    </p>
                                </button>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="capacity">
                            <h4>儲存裝置。</h4>
                            <div class="container">
                                <button type="button" id="s64GB">
                                    <p>64GB¹<br>
                                        <span id="priceFor64GB">NT$18,900 起</span>
                                    </p>
                                </button>
                                <button type="button" id="s256GB">
                                    <p>256GB¹<br>
                                        <span id="priceFor256GB">NT$23,900 起</span>
                                    </p>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="connect">
                            <h4>連線能力</h4>
                            <div class="container">
                                <button type="button" id="WiFi">
                                    <p>Wi-Fi<br>
                                        <span id="priceForWifi">NT$23,900起</span>
                                    </p>
                                </button>
                                <button type="button" id="mobile">
                                    <p>Wi-Fi+行動網路<br>
                                        <span id="priceForNetwork">NT$23,200起</span>
                                    </p>
                            </div>
                        </div>
                        <div class="line"></div>
                        <div class="total">
                            <h3 id="totalPrice">NT$</h3>
                            <p>含營業稅和其他法定稅費：約 NT$ <span id="tax"></span> 。*
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </article>

    <!-- 全域變數&生成DOMNODE -->
    <script>
        let url, mainImg, btnGray, btnSilver, btnPink, btnGreen, btnBlue, btn64GB, btn256GB, btnWIFI, btnNetwork, price, priceFor64GB, priceFor256GB, priceForWIFI, priceForNetwork, totalPrice, tax, color, storage, network, ipadAirArray;

        mainImg = document.querySelector('#mainimg');
        // console.log(mainImg);
        btnGray = document.querySelector('#gray');
        btnSilver = document.querySelector('#silver');
        btnPink = document.querySelector('#pink');
        btnGreen = document.querySelector('#green');
        btnBlue = document.querySelector('#blue');
        // console.log(btnGray);
        // console.log(btnSilver);
        // console.log(btnPink);
        // console.log(btnGreen);
        // console.log(btnBlue);
        btn64GB = document.querySelector('#s64GB');
        btn256GB = document.querySelector('#s256GB');
        // console.log(btn64GB);
        // console.log(btn256BG);
        btnWIFI = document.querySelector('#WiFi');
        btnNetwork = document.querySelector('#mobile');
        // console.log(btnWIFI);
        // console.log(btnNetwork);
        price = document.querySelector('.price');
        priceFor64GB = document.querySelector('#priceFor64GB');
        priceFor256GB = document.querySelector('#priceFor256GB');
        priceForWIFI = document.querySelector('#priceForWifi');
        priceForNetwork = document.querySelector('#priceForNetwork');
        totalPrice = document.querySelector('#totalPrice');
        tax = document.querySelector('#tax');
        // console.log(price);
        // console.log(priceFor64GB);
        // console.log(priceFor256GB);
        // console.log(priceForWIFI);
        // console.log(priceForNetwork);
        // console.log(totalPrice);
        // console.log(tax);
    </script>

    <!-- 更換圖片 -->
    <script>
        //更換圖片
        function imgsrc(color) {
            return `ipad-air-select-cell-${color}-202009.png`
        }
        function gray() {
            mainImg.src = imgsrc('spacegray');
            color = '太空灰色';
        }
        function silver() {
            mainImg.src = imgsrc('silver');
            color = '銀色';
        }
        function pink() {
            mainImg.src = imgsrc('gold');
            color = '玫瑰金色';
        }
        function green() {
            mainImg.src = imgsrc('green');
            color = '綠色';
        }
        function blue() {
            mainImg.src = imgsrc('blue');
            color = '天藍色';
        }
        function removeSelectInColor() {
            btnGray.classList.remove('select');
            btnSilver.classList.remove('select');
            btnPink.classList.remove('select');
            btnGreen.classList.remove('select');
            btnBlue.classList.remove('select');
        }
        btnGray.addEventListener('click', function () {
            removeSelectInColor();
            btnGray.classList.add('select');
            gray();
        })
        btnSilver.addEventListener('click', function () {
            removeSelectInColor();
            btnSilver.classList.add('select');
            silver();
        })
        btnPink.addEventListener('click', function () {
            removeSelectInColor();
            btnPink.classList.add('select');
            pink();
        })
        btnGreen.addEventListener('click', function () {
            removeSelectInColor();
            btnGreen.classList.add('select');
            green();
        })
        btnBlue.addEventListener('click', function () {
            removeSelectInColor();
            btnBlue.classList.add('select');
            blue();
        })

    </script>

    <!-- 儲存空間 -->
    <script>
        btn64GB.addEventListener('click', function () {
            btn64GB.classList.add('select');
            btn256GB.classList.remove('select');
            storage = '64GB';
            console.log(storage);
        })
        btn256GB.addEventListener('click', function () {
            btn256GB.classList.add('select');
            btn64GB.classList.remove('select');
            storage = '256GB';
            console.log(storage);
        })
    </script>

    <!-- 連線能力 -->
    <script>
        btnWIFI.addEventListener('click', function () {
            btnWIFI.classList.add('select');
            btnNetwork.classList.remove('select');
            network = 'Wi-Fi';
            console.log(network);
            changePrice();
        })
        btnNetwork.addEventListener('click', function () {
            btnNetwork.classList.add('select');
            btnWIFI.classList.remove('select');
            network = 'Cellular';
            console.log(network);
            changePrice();
        })
    </script>

    <script>
        function changePrice() {
            fetch(url)
                .then(response => response.json())
                .then(result => {
                    ipadAirArray = result;
                    let useprice = ipadAirArray.filter(ipad => {
                        ipad.color == color && ipad.storage == storage && ipad.network == network;
                        console.log(useprice)
                    })
                });
        }
    </script>
    <script>
        url = "https://raw.githubusercontent.com/chleif/FileStorage/main/iPadAir.json";
        fetch(url)
        .then(request=>request.json())
        .then(result=>{
            // console.log(Array.isArray(result));
            // 0: {id: "A001", color: "太空灰色", price: 18900, storage: "64GB", network: "Wi-Fi", …}
            console.log(result);
        })




        //調整總價
        // function totalPrice128G() {
        //     showPrice.innerText = price128G.innerText;
        // }
        // function totalPrice256G() {
        //     showPrice.innerText = price256G.innerText;
        // }
        // function totalPrice512G() {
        //     showPrice.innerText = price512G.innerText;
        // }


    </script>



</body>

</html>